
----------
aparasha    Date: Wed May 13 16:39:23 EDT 2009  CSN: CSN-platform-acp-2
                  Wed May 13 20:39:23 UTC 2009


Directory modules
 bluespec/                 Locally Added               0 

Directory modules/bluespec
 fpgaenv/                  Locally Added               0 

Directory modules/bluespec/fpgaenv
 physical-platform/        Locally Added               0 

Directory modules/bluespec/fpgaenv/physical-platform
 acp-m2c/                  Locally Added               0 

Directory modules/bluespec/fpgaenv/physical-platform/acp-m2c
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 acp-m2c.cpp               Locally Added               0 
 acp-m2c.h                 Locally Added               0 
 xilinx.xst                Locally Added               0 
 acp-m2c.awb               Locally Added               0 
 acp-m2c.bsv               Locally Added               0 
 acp-m2c.ucf               Locally Added               0 

Directory modules/bluespec/fpgaenv/physical-platform
 physical-devices/         Locally Added               0 

Directory modules/bluespec/fpgaenv/physical-platform/physical-devices
 arches-mpi/               Locally Added               0 

Directory modules/bluespec/fpgaenv/physical-platform/physical-devices/arches-mpi
 inst_m2_dualcompute_infrastructure_wrapper.ngc Locally Added               0 
 fsl_mpedata_to_vacc_wrapper.ngc Locally Added               0 
 fsl_vacc_to_mpedata_wrapper.ngc Locally Added               0 
 mb_mba_wrapper.ngc        Locally Added               0 
 m2c_f1.ucf                Locally Added               0 
 arches-mpi-vhdl-import.bsv Locally Added               0 
 tmd_mpe_vacc_wrapper.ngc  Locally Added               0 
 plb_gpio_monitor_mba_wrapper.ngc Locally Added               0 
 fsl_l1_to_mpe_wrapper.ngc Locally Added               0 
 fsl_mpe_to_l1_wrapper.ngc Locally Added               0 
 arches-mpi-device.awb     Locally Added               0 
 plb_mdm_mba_wrapper.ngc   Locally Added               0 
 inst_m2_fsl_if_l1_wrapper.ngc Locally Added               0 
 lmb_bram_mba_wrapper.ngc  Locally Added               0 
 inst_util_clk0_pll_wrapper.ngc Locally Added               0 
 inst_util_clk100_pll_wrapper.ngc Locally Added               0 
 dlmb_mba_wrapper.ngc      Locally Added               0 
 system.vhd                Locally Added               0 
 dlmb_cntlr_mba_wrapper.ngc Locally Added               0 
 inst_proc_sys_reset_wrapper.ngc Locally Added               0 
 arches-mpi-device.cpp     Locally Added               0 
 ilmb_mba_wrapper.ngc      Locally Added               0 
 ilmb_cntlr_mba_wrapper.ngc Locally Added               0 
 inst_util_srl_reset_clk0_wrapper.ngc Locally Added               0 
 plb_bus_mba_wrapper.ngc   Locally Added               0 
 arches-mpi-device.h       Locally Added               0 
 fsl_vacc_to_mpecmd_wrapper.ngc Locally Added               0 
 fsl_mpecmd_to_vacc_wrapper.ngc Locally Added               0 
 arches-mpi-device.bsv     Locally Added               0 

Directory modules/bluespec
 common/                   Locally Added               0 

- Added a new ACP M2 Compute Physical Platform
- Added a new Arches MPI Physical Device (does not work yet)

----------
aparasha    Date: Thu May 14 15:39:37 EDT 2009  CSN: CSN-platform-acp-3
                  Thu May 14 19:39:37 UTC 2009


Directory modules/bluespec/fpgaenv
 virtual-platform/         Locally Added               0 

Directory modules/bluespec/fpgaenv/virtual-platform
 channelio/                Locally Added               0 

Directory modules/bluespec/fpgaenv/virtual-platform/channelio
 physical-channel/         Locally Added               0 

Directory modules/bluespec/fpgaenv/virtual-platform/channelio/physical-channel
 arches-mpi/               Locally Added               0 

Directory modules/bluespec/fpgaenv/virtual-platform/channelio/physical-channel/arches-mpi
 arches-mpi-channel.cpp    Locally Added               0 
 arches-mpi-channel.h      Locally Added               0 
 arches-mpi-channel.awb    Locally Added               0 
 arches-mpi-channel.bsv    Locally Added               0 

Directory modules/bluespec/fpgaenv/physical-platform/physical-devices/arches-mpi
 m2_fsl_rx_phy.v           Locally Added               0 
 inst_m2_dualcompute_infrastructure_wrapper.v Locally Added               0 
 m2_fsl_tx_phy.v           Locally Added               0 
 param_delay.v             Locally Added               0 
 metasync.v                Locally Added               0 
 cmp_signed_10bit.vhd      Locally Added               0 
 arches-mpi-device.awb     Locally Modified            2 
 inst_m2_fsl_if_l1_wrapper.v Locally Added               0 
 fht_top.v                 Locally Added               0 
 m2_fsl_rx_top.v           Locally Added               0 
 inst_m2_dualcompute_infrastructure_wrapper.ngc Locally Removed             2 
 m2_fsl_tx_top.v           Locally Added               0 
 m2_dualcompute_infrastructure.v Locally Added               0 
 m2_fsl_tx_ctrl.v          Locally Added               0 
 gen_sync_bram.vhd         Locally Added               0 
 m2_fsl_rx_data.v          Locally Added               0 
 fht_module.v              Locally Added               0 
 m2_fsl_tx_data.v          Locally Added               0 
 fsl_v20.vhd               Locally Added               0 
 m2_fsl_rx_pn.v            Locally Added               0 
 walsh_tx.v                Locally Added               0 
 inst_m2_fsl_if_l1_wrapper.ngc Locally Removed             2 
 sync_fifo.vhd             Locally Added               0 
 async_fifo.vhd            Locally Added               0 
 m2_fsl_rx_clklock.v       Locally Added               0 
 param_delay_1bit.v        Locally Added               0 
 async_fifo_bram.vhd       Locally Added               0 
 system.vhd                Locally Modified            2 
 m2_fsl_if.v               Locally Added               0 
 gen_sync_dpram.vhd        Locally Added               0 
 gen_srlfifo.vhd           Locally Added               0 
 srl_sel_256bit.vhd        Locally Added               0 

Directory config/pm
 hasim/                    Locally Added               0 

Directory config/pm/hasim
 submodels/                Locally Added               0 

Directory config/pm/hasim/submodels
 fpgaenv/                  Locally Added               0 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-acp-m2c.apm Locally Added               0 

Directory config/pm
 bluespec/                 Locally Added               0 

Directory config/pm/bluespec
 demos/                    Locally Added               0 

Directory config/pm/bluespec/demos
 rrrtest/                  Locally Added               0 

Directory config/pm/bluespec/demos/rrrtest
 rrrtest_hybrid_acp.apm    Locally Added               0 

- Updated Arches MPI device. It now successfully generates a bitfile
  for the ACP M2 Compute module. Since the software side of the stack
  is not ready yet, there's no evidence that this works.

  To generate the bitfile correctly, some SConstruct flags need to be
  added. These will be added in a hasim commit coming shortly.

  The entire fpgaenv directory is slightly mislocated in this
  repository. I will move it as part of the next checkin.

- Added an fpgaenv/virtual platform for the ACP module

- Added a Physical Channel for the ACP module. Implementation for this
  is not yet complete.

----------
aparasha    Date: Thu May 14 15:49:53 EDT 2009  CSN: CSN-platform-acp-4
                  Thu May 14 19:49:53 UTC 2009


Directory modules/bluespec
 fpgaenv/                  Locally Removed             2 

Directory modules/bluespec/common
 fpgaenv/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv
 virtual-platform/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform
 channelio/                Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio
 physical-channel/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 arches-mpi/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/arches-mpi
 arches-mpi-channel.cpp    Locally Added               0 
 arches-mpi-channel.h      Locally Added               0 
 arches-mpi-channel.awb    Locally Added               0 
 arches-mpi-channel.bsv    Locally Added               0 

Directory modules/bluespec/common/fpgaenv
 physical-platform/        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform
 acp-m2c/                  Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 acp-m2c.cpp               Locally Added               0 
 acp-m2c.h                 Locally Added               0 
 xilinx.xst                Locally Added               0 
 acp-m2c.awb               Locally Added               0 
 acp-m2c.bsv               Locally Added               0 
 acp-m2c.ucf               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform
 physical-devices/         Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 arches-mpi/               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/arches-mpi
 m2_fsl_rx_phy.v           Locally Added               0 
 inst_m2_dualcompute_infrastructure_wrapper.v Locally Added               0 
 m2_fsl_tx_phy.v           Locally Added               0 
 param_delay.v             Locally Added               0 
 mb_mba_wrapper.ngc        Locally Added               0 
 fsl_mpedata_to_vacc_wrapper.ngc Locally Added               0 
 fsl_vacc_to_mpedata_wrapper.ngc Locally Added               0 
 m2c_f1.ucf                Locally Added               0 
 plb_gpio_monitor_mba_wrapper.ngc Locally Added               0 
 metasync.v                Locally Added               0 
 cmp_signed_10bit.vhd      Locally Added               0 
 fsl_l1_to_mpe_wrapper.ngc Locally Added               0 
 fsl_mpe_to_l1_wrapper.ngc Locally Added               0 
 arches-mpi-device.awb     Locally Added               0 
 inst_m2_fsl_if_l1_wrapper.v Locally Added               0 
 plb_mdm_mba_wrapper.ngc   Locally Added               0 
 inst_util_clk100_pll_wrapper.ngc Locally Added               0 
 dlmb_mba_wrapper.ngc      Locally Added               0 
 fht_top.v                 Locally Added               0 
 ilmb_cntlr_mba_wrapper.ngc Locally Added               0 
 inst_util_srl_reset_clk0_wrapper.ngc Locally Added               0 
 arches-mpi-device.h       Locally Added               0 
 arches-mpi-device.bsv     Locally Added               0 
 m2_fsl_rx_top.v           Locally Added               0 
 m2_fsl_tx_top.v           Locally Added               0 
 arches-mpi-vhdl-import.bsv Locally Added               0 
 m2_dualcompute_infrastructure.v Locally Added               0 
 m2_fsl_tx_ctrl.v          Locally Added               0 
 gen_sync_bram.vhd         Locally Added               0 
 tmd_mpe_vacc_wrapper.ngc  Locally Added               0 
 m2_fsl_rx_data.v          Locally Added               0 
 fht_module.v              Locally Added               0 
 m2_fsl_tx_data.v          Locally Added               0 
 fsl_v20.vhd               Locally Added               0 
 m2_fsl_rx_pn.v            Locally Added               0 
 walsh_tx.v                Locally Added               0 
 sync_fifo.vhd             Locally Added               0 
 lmb_bram_mba_wrapper.ngc  Locally Added               0 
 inst_util_clk0_pll_wrapper.ngc Locally Added               0 
 async_fifo.vhd            Locally Added               0 
 param_delay_1bit.v        Locally Added               0 
 m2_fsl_rx_clklock.v       Locally Added               0 
 async_fifo_bram.vhd       Locally Added               0 
 system.vhd                Locally Added               0 
 m2_fsl_if.v               Locally Added               0 
 dlmb_cntlr_mba_wrapper.ngc Locally Added               0 
 arches-mpi-device.cpp     Locally Added               0 
 inst_proc_sys_reset_wrapper.ngc Locally Added               0 
 ilmb_mba_wrapper.ngc      Locally Added               0 
 gen_sync_dpram.vhd        Locally Added               0 
 plb_bus_mba_wrapper.ngc   Locally Added               0 
 fsl_mpecmd_to_vacc_wrapper.ngc Locally Added               0 
 fsl_vacc_to_mpecmd_wrapper.ngc Locally Added               0 
 gen_srlfifo.vhd           Locally Added               0 
 srl_sel_256bit.vhd        Locally Added               0 

Moved fpgaenv to its correct location.

----------
aparasha    Date: Thu May 14 15:52:48 EDT 2009  CSN: CSN-platform-acp-5
                  Thu May 14 19:52:48 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-acp-m2c.apm Locally Modified            3 

Updated config to point to new AWB module locations in fpgaenv

----------
aparasha    Date: Thu May 14 16:58:02 EDT 2009  CSN: CSN-platform-acp-6
                  Thu May 14 20:58:02 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/arches-mpi
 arches-mpi-device.awb     Locally Modified            4 
 srl_sel_256bit.ngc        Locally Added               0 
 cmp_signed_10bit.ngc      Locally Added               0 

Missed some files in the last checkin.

----------
aparasha    Date: Thu May 21 18:22:24 EDT 2009  CSN: CSN-platform-acp-7
                  Thu May 21 22:22:24 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/arches-mpi
 mpi_headers.h             Locally Added               0 
 mpi.c                     Locally Added               0 
 mpi_constants.h           Locally Added               0 
 mpi.h                     Locally Added               0 
 arches-mpi-device.h       Locally Modified            5 
 GeneratedConstants.h      Locally Added               0 
 arches-mpi-device.cpp     Locally Modified            5 
 arches-mpi-device.awb     Locally Modified            6 

Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c
 acp-m2c.awb               Locally Modified            5 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/arches-mpi
 arches-mpi-channel.cpp    Locally Modified            5 
 arches-mpi-channel.bsv    Locally Modified            5 

Directory .
 libmpi_x86_threadmpe_linux.a Locally Added               0 
 libacp.a                  Locally Added               0 

Completed implementation of Arches MPI Device and a new Physical Channel
based on the device. An RRRTest model can now be built for the ACP
Platform, but a slight hacking of the SCons script is needed to link
the two libraries libacp.a and libmpi_xxx.a correctly into the host
software executable.

The platform currently does not have a clock divider/multiplier, so only
simple models that can run at 133MHz will work.

----------
aparasha    Date: Fri May 22 16:21:46 EDT 2009  CSN: CSN-platform-acp-8
                  Fri May 22 20:21:46 UTC 2009


Directory config/pm/hasim
 demos/                    Locally Added               0 

Directory config/pm/hasim/demos
 test/                     Locally Added               0 

Directory config/pm/hasim/demos/test
 mem_test/                 Locally Added               0 

Directory config/pm/hasim/demos/test/mem_test
 mem_test_hybrid_nopvt_acp.apm Locally Added               0 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-acp-m2c.apm Locally Modified            7 

Directory config/pm/bluespec/demos/rrrtest
 rrrtest_hybrid_acp.apm    Locally Modified            7 

Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c
 xilinx.download           Locally Modified            7 
 acp-m2c.awb               Locally Modified            7 
 acp-m2c.bsv               Locally Modified            7 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/arches-mpi
 arches-mpi-device.awb     Locally Modified            7 
 arches-mpi-device.bsv     Locally Modified            7 
 arches-mpi-device.cpp     Locally Modified            7 

- Added support for user-specified clock transformations to the ACP platform.
  This is currently buggy and only works with a 1:1 transformation.

- Added synchronizers to the Arches MPI device.

----------
aparasha    Date: Fri May 22 18:23:13 EDT 2009  CSN: CSN-platform-acp-9
                  Fri May 22 22:23:13 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/arches-mpi
 arches-mpi-device.awb     Locally Modified            8 
 arches-mpi-device.bsv     Locally Modified            8 
 arches-mpi-vhdl-import.bsv Locally Modified            8 
 system.vhd                Locally Modified            8 

Arches MPI Device now uses a raw 100MHz FPGA clock to derive the model clock
from, instead of using the MPE clock.

Model Clock transformations work now.

The default mult/div ratios have been set to 3:4, thus giving a 75MHz model
clock.

----------
mcadler     Date: Mon May 25 22:49:59 EDT 2009  CSN: CSN-platform-acp-10
                  Tue May 26 02:49:59 UTC 2009


Directory config/pm/hasim/demos/test/mem_test
 mem_test_hybrid_nopvt_acp.apm Locally Modified            9 
 mem_test_hybrid_acp.apm   Locally Added               0 

Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-acp-m2c.apm Locally Modified            9 

- Use more BRAM for local memory.
- Update mem_test.

----------
mcadler     Date: Tue May 26 11:46:31 EDT 2009  CSN: CSN-platform-acp-11
                  Tue May 26 15:46:31 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/arches-mpi
 arches-mpi-channel.bsv    Locally Modified            9 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/arches-mpi
 arches-mpi-device.bsv     Locally Modified            9 

Fix timing problems that show up even when the timing score is 0:

- Keep FPGA-side channel I/O send command and data messages in sync across the
  clock crossing.
- Hold model reset for multiple cycles.

----------
mcadler     Date: Mon Aug  3 07:49:32 EDT 2009  CSN: CSN-platform-acp-12
                  Mon Aug  3 11:49:32 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c
 acp-m2c.awb               Locally Modified           11 

Add MAP_OPTION required by recent SCons script change.

----------
emer        Date: Tue Sep  1 13:50:41 EDT 2009  CSN: CSN-platform-acp-13
                  Tue Sep  1 17:50:41 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-acp-m2c.apm Locally Modified           12 

Filling in missing modules in acp fpgaenv.

----------
emer        Date: Tue Sep  8 14:18:23 EDT 2009  CSN: CSN-platform-acp-14
                  Tue Sep  8 18:18:23 UTC 2009


Directory config/pm
 platform-acp/             Locally Removed            13 

Directory config/pm/platform-acp
 README                    Locally Removed            13 

Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c
 acp-m2c.awb               Locally Modified           13 

Moved MAKE_ALL_TARGET from the root modules (model/project) to the
physical_platform module inside fpgaenv. In the various physical
platforms the default is set appropriately, e.g., exe for simulation,
bit for real hardware. In the physical_platform module, MAKE_ALL_TARGET
is declared as a 'global' parameter so it can be overridden in the
model that requires an fpgaenv.

----------
aparasha    Date: Mon Sep 14 10:58:12 EDT 2009  CSN: CSN-platform-acp-15
                  Mon Sep 14 14:58:12 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 fpgaenv-acp-m2c-nallatech.apm Locally Added               0 

Directory config/pm/bluespec/demos/rrrtest
 rrrtest_hybrid_acp_nallatech.apm Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel
 nallatech-edge/           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/nallatech-edge
 npc-marshaller.bsv        Locally Added               0 
 nallatech-edge-channel.cpp Locally Added               0 
 nallatech-edge-channel.h  Locally Added               0 
 npc-demarshaller.bsv      Locally Added               0 
 nallatech-edge-channel.awb Locally Added               0 
 nallatech-edge-channel.bsv Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform
 acp-m2c-nallatech/        Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c-nallatech
 xilinx.download           Locally Added               0 
 xilinx.ut                 Locally Added               0 
 acp-m2c.cpp               Locally Added               0 
 acp-m2c.h                 Locally Added               0 
 xilinx.xst                Locally Added               0 
 acp-m2c.awb               Locally Added               0 
 acp-m2c.bsv               Locally Added               0 
 acp-m2c.ucf               Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices
 nallatech-edge/           Locally Added               0 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 usr_reg_slave_if_io_example.vhd Locally Added               0 
 nallatech-edge-device.h   Locally Added               0 
 FPGA0_lvds_to_lower_module.ucf Locally Added               0 
 nallatech-edge-device.awb Locally Added               0 
 nallatech-edge-device.bsv Locally Added               0 
 nallatech-edge-device.ucf Locally Added               0 
 nallatech-edge-vhdl-import.bsv Locally Added               0 
 fsb_compute_edge_2rx2tx.ngc Locally Added               0 
 nallatech-edge-device.vhd Locally Added               0 
 usr_reg_slave_if_bram_example.vhd Locally Added               0 
 nallatech-edge-device.cpp Locally Added               0 
 FPGA0_system_interface.ucf Locally Added               0 

- Added a new ACP M2C Platform based on Nallatech's API. The current
  implementation only works with designs that can synthesize at 100MHz because
  instantiating DCMs introduces huge clock skews. This is being worked on.

- Added a new physical channel implementation using the Nallatech API.

- Added a new ACP M2C fpgaenv submodel for the Nallatech-based platform.

- Added a new RRRTest demo model config using the new ACP M2C fpgaenv.

----------
aparasha    Date: Tue Sep 22 14:36:17 EDT 2009  CSN: CSN-platform-acp-16
                  Tue Sep 22 18:36:17 UTC 2009


Directory config/pm/bluespec/demos/rrrtest
 rrrtest_hybrid_acp_nallatech.apm Locally Modified           15 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 FPGA0_lvds_to_lower_module.ucf Locally Removed            15 
 nallatech-edge-device.awb Locally Modified           15 
 nallatech-edge-device.bsv Locally Modified           15 
 nallatech-edge-device.ucf Locally Modified           15 
 FPGA0_system_interface.ucf Locally Removed            15 

Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c-nallatech
 acp-m2c.awb               Locally Modified           15 

Updated Nallatech ACP platform to support user-specified clock frequencies.

----------
aparasha    Date: Tue Sep 22 15:14:57 EDT 2009  CSN: CSN-platform-acp-17
                  Tue Sep 22 19:14:57 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 nallatech-edge-device.cpp Locally Modified           15 

Updated device to construct the name of the FPGA bitfile from the APM_NAME
parameter passed down by the SCons script (this was hardcoded earlier).

----------
mcadler     Date: Wed Sep 23 10:05:40 EDT 2009  CSN: CSN-platform-acp-18
                  Wed Sep 23 14:05:40 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c
 xilinx.xst                Locally Modified           17 
 acp-m2c.awb               Locally Modified           17 

Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c-nallatech
 xilinx.download           Locally Removed            17 
 xilinx.xst                Locally Modified           17 
 acp-m2c.awb               Locally Modified           17 

- Use Elliott's new FPGA_PART_XILINX instead of FPGA_PART.
- Don't need an FPGA_POSITION for Nallatech firmware since not loading bit
  file with impact.
- Enable -global_opt in map.  Don't know if it works yet.

----------
aparasha    Date: Wed Sep 23 17:59:23 EDT 2009  CSN: CSN-platform-acp-19
                  Wed Sep 23 21:59:23 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 nallatech-edge-device.ucf Locally Modified           18 

Removed a set of TIG constraints in the UCF that were hard-coded to
particular net-names that the Bluespec compiler was generating for
a certain design. These have been replaced with a wildcard net-name
that should apply to all Bluespec-generated names.

----------
mcadler     Date: Thu Sep 24 17:25:05 EDT 2009  CSN: CSN-platform-acp-20
                  Thu Sep 24 21:25:05 UTC 2009


Directory config/pm/hasim/demos/test/mem_test
 mem_test_hybrid_nopvt_acp.apm Locally Modified           19 
 mem_test_hybrid_acp.apm   Locally Modified           19 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 nallatech-edge-device.awb Locally Modified           19 
 nallatech-edge-device.bsv Locally Modified           19 
 nallatech-edge-device.cpp Locally Modified           19 

- Nallatech code now finds the bit file to load using the FPGA_BIT_FILE
  environment variable.
- Default PLL output clock is still 75MHz but with "better" parameters,
  using an input divider.
- mem_test for ACP now uses Nallatech.

----------
mcadler     Date: Thu Sep 24 17:32:45 EDT 2009  CSN: CSN-platform-acp-21
                  Thu Sep 24 21:32:45 UTC 2009


Directory config/pm/hasim
 demos/                    Locally Removed            19 

Moved to hasim repository.

----------
mcadler     Date: Thu Sep 24 17:35:19 EDT 2009  CSN: CSN-platform-acp-22
                  Thu Sep 24 21:35:19 UTC 2009


Directory config/pm/bluespec
 demos/                    Locally Removed            20 

Directory config/pm/bluespec/demos
 rrrtest/                  Locally Removed            20 

Directory config/pm/bluespec/demos/rrrtest
 rrrtest_hybrid_acp_nallatech.apm Locally Removed            20 
 rrrtest_hybrid_acp.apm    Locally Removed            20 

Directory config/pm
 bluespec/                 Locally Removed            20 

Moved to hasim repository.

----------
aparasha    Date: Fri Sep 25 14:35:22 EDT 2009  CSN: CSN-platform-acp-23
                  Fri Sep 25 18:35:22 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/nallatech-edge
 nallatech-edge-channel.cpp Locally Modified           22 
 nallatech-edge-channel.h  Locally Modified           22 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 nallatech-edge-device.h   Locally Modified           22 
 nallatech-edge-device.awb Locally Modified           22 
 nallatech-edge-device.cpp Locally Modified           22 

- Refactored some code between the Nallatech channel and the Nallatech device.
  The channel is no longer aware of the bugs in the Nallatech firmware that
  impose restrictions on message sizes. All bugfix code now lives in the device
  module.

- Abstracted the Nallatech device workspace into distinct input and output
  windows (as visible from the channel layer).

----------
mcadler     Date: Tue Sep 29 15:01:36 EDT 2009  CSN: CSN-platform-acp-24
                  Tue Sep 29 19:01:36 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/nallatech-edge
 nallatech-edge-channel.cpp Locally Modified           23 

The test in the PHYSICAL_CHANNEL_CLASS::Read() loop was inverted, causing a
SEGV due to indirection through a NULL pointer in the caller.

----------
mcadler     Date: Thu Oct  1 07:09:27 EDT 2009  CSN: CSN-platform-acp-27
                  Thu Oct  1 11:09:27 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 nallatech-edge-device.awb Locally Modified           24 
 nallatech-edge-device.bsv Locally Modified           24 

PLL generator no longer requires low level timing parameters.  Just pass in
a target frequency.

----------
aparasha    Date: Thu Oct  8 16:50:03 EDT 2009  CSN: CSN-platform-acp-33
                  Thu Oct  8 20:50:03 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/nallatech-edge
 nallatech-edge-channel.cpp Locally Modified           32 
 nallatech-edge-channel.awb Locally Modified           32 
 nallatech-edge-channel.bsv Locally Modified           32 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 nallatech-edge-device.cpp Locally Modified           32 

- Decreased message transfer window size from 1024 bytes to 128 bytes.
- Reorganized some code between Channel and Device.

----------
mcadler     Date: Fri Oct 23 15:23:11 EDT 2009  CSN: CSN-platform-acp-34
                  Fri Oct 23 19:23:11 UTC 2009


Directory drivers
 nallatech/                Locally Added               0 

Directory drivers/nallatech
 linux/                    Locally Added               0 

Directory drivers/nallatech/linux
 acpdriver.c               Locally Added               0 
 acp.h                     Locally Added               0 
 Makefile                  Locally Added               0 

Directory .
 drivers/                  Locally Added               0 

Add Nallatech ACP driver.

----------
mcadler     Date: Wed Nov  4 20:29:40 EST 2009  CSN: CSN-platform-acp-35
                  Thu Nov  5 01:29:40 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c
 xilinx.xst                Locally Modified           34 

Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c-nallatech
 xilinx.xst                Locally Modified           34 

Changes for new parallel Xst builds.

----------
mcadler     Date: Wed Nov 11 14:07:45 EST 2009  CSN: CSN-platform-acp-36
                  Wed Nov 11 19:07:45 UTC 2009


Directory modules/bluespec/common/fpgaenv/physical-platform/acp-m2c-nallatech
 acp-m2c.awb               Locally Modified           35 

Find ACP libraries through the "latest" link, not a version-specific path.

----------
mcadler     Date: Wed Nov 18 11:48:49 EST 2009  CSN: CSN-platform-acp-37
                  Wed Nov 18 16:48:49 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/nallatech-edge
 npc-marshaller.bsv        Locally Modified           36 
 nallatech-edge-channel.cpp Locally Modified           36 
 nallatech-edge-channel.h  Locally Modified           36 
 npc-demarshaller.bsv      Locally Modified           36 
 nallatech-edge-channel.awb Locally Modified           36 
 nallatech-edge-channel.bsv Locally Modified           36 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 nallatech-edge-device.h   Locally Modified           36 
 nallatech-edge-device.awb Locally Modified           36 
 nallatech-edge-device.ucf Locally Modified           36 
 nallatech-edge-device.cpp Locally Modified           36 

Performance improvements to Nallatech channel I/O:

- FPGA-side: read and write for a single transaction in parallel.  (Still only
  one read or write transaction at a time due to Nallatech limitations.)
  The dummy buffer is now read/written while the real work is done.

- Variable message sizes.  Software attempts to pick an optimal size during
  the run.  This can probably still be tuned more.

- Software controlled spin loop on the HW side waiting for data to arrive
  from the model during HW -> SW data request.  This seems to have surprisingly
  little effect.

- Unlimited HW -> SW message size (at least by Channel I/O).

- SW -> HW message limit raised to 8KB.

- Marshaller and demarshaller can now enq() and deq() in the same cycle.

Performance is about 2.5x - 3x better, so it has gone from unbelievably terrible
to merely unacceptable.  RRR test reports about 9MB/s for one way HW->SW.

With the current tuning a variety of RRR patterns appear to hit near optimal
buffer sizes.

----------
mcadler     Date: Fri Nov 20 19:51:03 EST 2009  CSN: CSN-platform-acp-38
                  Sat Nov 21 00:51:03 UTC 2009


Directory config/pm/hasim/submodels/fpgaenv
 hasim-fpgaenv-acp-m2c.apm Locally Modified           37 
 fpgaenv-acp-m2c-nallatech.apm Locally Modified           37 

Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/nallatech-edge
 nallatech-edge-channel.cpp Locally Modified           37 
 nallatech-edge-channel.awb Locally Modified           37 
 nallatech-edge-channel.bsv Locally Modified           37 

Directory modules/bluespec/common/fpgaenv/physical-platform/physical-devices/nallatech-edge
 nallatech-edge-device.h   Locally Modified           37 
 nallatech-edge-device.awb Locally Modified           37 
 nallatech-edge-device.cpp Locally Modified           37 

- Use 64 bit UMF chunks instead of 32.

- Drop the wasted UMF chunk that used to signal the start of a new message.
  Now the physical channel detects the "no message" flag as a CHUNK that is 0.
  UMF header chunks are guaranteed non-zero by setting the phyChannelPvt
  flag I added to the UMF header.

- Tweak the automatic buffer sizing code for data flowing from the FPGA to
  the host.  If a message was always exactly the size of the buffer the old
  code never grew the buffer to see whether multiple messages could be
  delivered together.

----------
mcadler     Date: Mon Nov 23 07:35:37 EST 2009  CSN: CSN-platform-acp-39
                  Mon Nov 23 12:35:37 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/nallatech-edge
 nallatech-edge-channel.cpp Locally Modified           38 
 nallatech-edge-channel.bsv Locally Modified           38 

- Fix a bug in which the channel can get stuck in an infinite loop when no
  message is pending from the FPGA to the host.

- Guarantee that the reads are completed before the last write on the FPGA side.
  I don't know whether this matters, but it matches the ACP example code and
  we don't know their buffering algorithm.

----------
mcadler     Date: Mon Nov 23 19:34:25 EST 2009  CSN: CSN-platform-acp-40
                  Tue Nov 24 00:34:25 UTC 2009


Directory modules/bluespec/common/fpgaenv/virtual-platform/channelio/physical-channel/nallatech-edge
 nallatech-edge-channel.cpp Locally Modified           39 
 nallatech-edge-channel.h  Locally Modified           39 
 nallatech-edge-channel.bsv Locally Modified           39 

Refactor the FPGA-side pipelines:

- Many fewer states and slightly shorter.

- No more specialized read vs. write operations.  A transaction now has a
  host to FPGA and an FPGA to host component, though the software doesn't yet
  take advantage of this.

- More than one host to FPGA message may be stored in the buffer, though software
  doesn't do this, yet.
